'use babel';
/* global atom, expect, describe, beforeEach, it, waitsForPromise, waitsFor, runs, advanceClock, jasmine */

var COMPLETION_DELAY = 100;

describe('autocomplete-paths', function () {
  var _ref = [];
  var editor = _ref[0];
  var provider = _ref[1];

  var getSuggestions = function getSuggestions() {
    var cursor = editor.getLastCursor();
    var start = cursor.getBeginningOfCurrentWordBufferPosition();
    var end = cursor.getBufferPosition();
    var prefix = editor.getTextInRange([start, end]);
    var request = {
      editor: editor,
      bufferPosition: end,
      scopeDescriptor: cursor.getScopeDescriptor(),
      prefix: prefix
    };
    return provider.getSuggestions(request);
  };

  beforeEach(function () {
    atom.config.set('autocomplete-plus.enableAutoActivation', true);
    atom.config.set('autocomplete-plus.autoActivationDelay', COMPLETION_DELAY);
    atom.config.set('autocomplete-paths.ignoredPatterns', ['**/tests']);

    var workspaceElement = atom.views.getView(atom.workspace);
    jasmine.attachToDOM(workspaceElement);

    waitsForPromise(function () {
      return Promise.all([atom.workspace.open('sample.js').then(function (e) {
        editor = e;
      }), atom.packages.activatePackage('language-javascript'), atom.packages.activatePackage('autocomplete-paths'), atom.packages.activatePackage('autocomplete-plus'), atom.packages.activatePackage('status-bar')]);
    });
    runs(function () {
      provider = atom.packages.getActivePackage('autocomplete-paths').mainModule.getProvider();
    });
    waitsFor(function () {
      return provider.isReady();
    });
  });

  it('triggers when text before cursor matches one of the scopes', function () {
    runs(function () {
      editor.setText('require(\'t');
      editor.setCursorBufferPosition([0, Infinity]);
    });
    waitsForPromise(function () {
      return getSuggestions().then(function (suggestions) {
        expect(suggestions).toHaveLength(4);
      });
    });
  });

  it('only displays files relevant to the matching scope', function () {
    waitsForPromise(function () {
      return atom.packages.activatePackage('language-javascript');
    });
    runs(function () {
      editor.setText('require(\'t');
      editor.setCursorBufferPosition([0, Infinity]);
    });
    waitsForPromise(function () {
      return getSuggestions().then(function (suggestions) {
        expect(suggestions).toHaveLength(4);
        expect(suggestions[0].displayText).toBe('somedir/testfile.js');
        expect(suggestions[1].displayText).toBe('linkeddir/testfile.js');
        expect(suggestions[2].displayText).toBe('somedir/testdir/nested-test-file.js');
        expect(suggestions[3].displayText).toBe('linkeddir/testdir/nested-test-file.js');
      });
    });
  });

  it('removes the extension when accepting a JS import suggestion', function () {
    var editorView = undefined;
    waitsForPromise(function () {
      return atom.packages.activatePackage('language-javascript');
    });
    runs(function () {
      editorView = atom.views.getView(editor);
      editor.setText('require(\'');
      editor.moveToBottom();
      editor.insertText('t');
      editor.insertText('e');
      editor.insertText('s');

      advanceClock(COMPLETION_DELAY);
    });
    waitsFor('autocomplete view to appear', 1000, function () {
      return editorView.querySelector('.autocomplete-plus');
    });
    runs(function () {
      atom.commands.dispatch(editorView, 'autocomplete-plus:confirm');

      expect(editor.getText()).toEqual('require(\'./somedir/testfile');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2FpbW9ycmlzLy5hdG9tL3BhY2thZ2VzL2F1dG9jb21wbGV0ZS1wYXRocy9zcGVjL2F1dG9jb21wbGV0ZS1wYXRocy1zcGVjLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFdBQVcsQ0FBQTs7O0FBR1gsSUFBTSxnQkFBZ0IsR0FBRyxHQUFHLENBQUE7O0FBRTVCLFFBQVEsQ0FBQyxvQkFBb0IsRUFBRSxZQUFNO2FBQ1IsRUFBRTtNQUF2QixNQUFNO01BQUUsUUFBUTs7QUFDdEIsTUFBTSxjQUFjLEdBQUcsU0FBakIsY0FBYyxHQUFTO0FBQzNCLFFBQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxhQUFhLEVBQUUsQ0FBQTtBQUNyQyxRQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsdUNBQXVDLEVBQUUsQ0FBQTtBQUM5RCxRQUFNLEdBQUcsR0FBRyxNQUFNLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTtBQUN0QyxRQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUE7QUFDbEQsUUFBTSxPQUFPLEdBQUc7QUFDZCxZQUFNLEVBQU4sTUFBTTtBQUNOLG9CQUFjLEVBQUUsR0FBRztBQUNuQixxQkFBZSxFQUFFLE1BQU0sQ0FBQyxrQkFBa0IsRUFBRTtBQUM1QyxZQUFNLEVBQU4sTUFBTTtLQUNQLENBQUE7QUFDRCxXQUFPLFFBQVEsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUE7R0FDeEMsQ0FBQTs7QUFFRCxZQUFVLENBQUMsWUFBTTtBQUNmLFFBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLHdDQUF3QyxFQUFFLElBQUksQ0FBQyxDQUFBO0FBQy9ELFFBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLHVDQUF1QyxFQUFFLGdCQUFnQixDQUFDLENBQUE7QUFDMUUsUUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsb0NBQW9DLEVBQUUsQ0FBQyxVQUFVLENBQUMs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WUFBTTtBQUN0RSxRQUFJLFVBQVUsWUFBQSxDQUFBO0FBQ2QsbUJBQWUsQ0FBQzthQUFNLElBQUksQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLHFCQUFxQixDQUFDO0tBQUEsQ0FBQyxDQUFBO0FBQzNFLFFBQUksQ0FBQyxZQUFNO0FBQ1QsZ0JBQVUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQTtBQUN2QyxZQUFNLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFBO0FBQzVCLFlBQU0sQ0FBQyxZQUFZLEVBQUUsQ0FBQTtBQUNyQixZQUFNLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0FBQ3RCLFlBQU0sQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUE7QUFDdEIsWUFBTSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQTs7QUFFdEIsa0JBQVksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFBO0tBQy9CLENBQUMsQ0FBQTtBQUNGLFlBQVEsQ0FBQyw2QkFBNkIsRUFBRSxJQUFJLEVBQUUsWUFBTTtBQUNsRCxhQUFPLFVBQVUsQ0FBQyxhQUFhLENBQUMsb0JBQW9CLENBQUMsQ0FBQTtLQUN0RCxDQUFDLENBQUE7QUFDRixRQUFJLENBQUMsWUFBTTtBQUNULFVBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLFVBQVUsRUFBRSwyQkFBMkIsQ0FBQyxDQUFBOztBQUUvRCxZQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLDhCQUE4QixDQUFDLENBQUE7S0FDakUsQ0FBQyxDQUFBO0dBQ0gsQ0FBQyxDQUFBO0NBQ0gsQ0FBQyxDQUFBIiwiZmlsZSI6Ii9ob21lL2FpbW9ycmlzLy5hdG9tL3BhY2thZ2VzL2F1dG9jb21wbGV0ZS1wYXRocy9zcGVjL2F1dG9jb21wbGV0ZS1wYXRocy1zcGVjLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBiYWJlbCdcbi8qIGdsb2JhbCBhdG9tLCBleHBlY3QsIGRlc2NyaWJlLCBiZWZvcmVFYWNoLCBpdCwgd2FpdHNGb3JQcm9taXNlLCB3YWl0c0ZvciwgcnVucywgYWR2YW5jZUNsb2NrLCBqYXNtaW5lICovXG5cbmNvbnN0IENPTVBMRVRJT05fREVMQVkgPSAxMDBcblxuZGVzY3JpYmUoJ2F1dG9jb21wbGV0ZS1wYXRocycsICgpID0+IHtcbiAgbGV0IFsgZWRpdG9yLCBwcm92aWRlciBdID0gW11cbiAgY29uc3QgZ2V0U3VnZ2VzdGlvbnMgPSAoKSA9PiB7XG4gICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldExhc3RDdXJzb3IoKVxuICAgIGNvbnN0IHN0YXJ0ID0gY3Vyc29yLmdldEJlZ2lubmluZ09mQ3VycmVudFdvcmRCdWZmZXJQb3NpdGlvbigpXG4gICAgY29uc3QgZW5kID0gY3Vyc29yLmdldEJ1ZmZlclBvc2l0aW9uKClcbiAgICBjb25zdCBwcmVmaXggPSBlZGl0b3IuZ2V0VGV4dEluUmFuZ2UoW3N0YXJ0LCBlbmRdKVxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICBlZGl0b3IsXG4gICAgICBidWZmZXJQb3NpdGlvbjogZW5kLFxuICAgICAgc2NvcGVEZXNjcmlwdG9yOiBjdXJzb3IuZ2V0U2NvcGVEZXNjcmlwdG9yKCksXG4gICAgICBwcmVmaXhcbiAgICB9XG4gICAgcmV0dXJuIHByb3ZpZGVyLmdldFN1Z2dlc3Rpb25zKHJlcXVlc3QpXG4gIH1cblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBhdG9tLmNvbmZpZy5zZXQoJ2F1dG9jb21wbGV0ZS1wbHVzLmVuYWJsZUF1dG9BY3RpdmF0aW9uJywgdHJ1ZSlcbiAgICBhdG9tLmNvbmZpZy5zZXQoJ2F1dG9jb21wbGV0ZS1wbHVzLmF1dG9BY3RpdmF0aW9uRGVsYXknLCBDT01QTEVUSU9OX0RFTEFZKVxuICAgIGF0b20uY29uZmlnLnNldCgnYXV0b2NvbXBsZXRlLXBhdGhzLmlnbm9yZWRQYXR0ZXJucycsIFsnKiovdGVzdHMnXSlcblxuICAgIGxldCB3b3Jrc3BhY2VFbGVtZW50ID0gYXRvbS52aWV3cy5nZXRWaWV3KGF0b20ud29ya3NwYWNlKVxuICAgIGphc21pbmUuYXR0YWNoVG9ET00od29ya3NwYWNlRWxlbWVudClcblxuICAgIHdhaXRzRm9yUHJvbWlzZSgoKSA9PlxuICAgICAgUHJvbWlzZS5hbGwoW1xuICAgICAgICBhdG9tLndvcmtzcGFjZS5vcGVuKCdzYW1wbGUuanMnKVxuICAgICAgICAgIC50aGVuKChlKSA9PiB7XG4gICAgICAgICAgICBlZGl0b3IgPSBlXG4gICAgICAgICAgfSksXG4gICAgICAgIGF0b20ucGFja2FnZXMuYWN0aXZhdGVQYWNrYWdlKCdsYW5ndWFnZS1qYXZhc2NyaXB0JyksXG4gICAgICAgIGF0b20ucGFja2FnZXMuYWN0aXZhdGVQYWNrYWdlKCdhdXRvY29tcGxldGUtcGF0aHMnKSxcbiAgICAgICAgYXRvbS5wYWNrYWdlcy5hY3RpdmF0ZVBhY2thZ2UoJ2F1dG9jb21wbGV0ZS1wbHVzJyksXG4gICAgICAgIGF0b20ucGFja2FnZXMuYWN0aXZhdGVQYWNrYWdlKCdzdGF0dXMtYmFyJylcbiAgICAgIF0pXG4gICAgKVxuICAgIHJ1bnMoKCkgPT4ge1xuICAgICAgcHJvdmlkZXIgPSBhdG9tLnBhY2thZ2VzLmdldEFjdGl2ZVBhY2thZ2UoJ2F1dG9jb21wbGV0ZS1wYXRocycpLm1haW5Nb2R1bGUuZ2V0UHJvdmlkZXIoKVxuICAgIH0pXG4gICAgd2FpdHNGb3IoKCkgPT4gcHJvdmlkZXIuaXNSZWFkeSgpKVxuICB9KVxuXG4gIGl0KCd0cmlnZ2VycyB3aGVuIHRleHQgYmVmb3JlIGN1cnNvciBtYXRjaGVzIG9uZSBvZiB0aGUgc2NvcGVzJywgKCkgPT4ge1xuICAgIHJ1bnMoKCkgPT4ge1xuICAgICAgZWRpdG9yLnNldFRleHQoJ3JlcXVpcmUoXFwndCcpXG4gICAgICBlZGl0b3Iuc2V0Q3Vyc29yQnVmZmVyUG9zaXRpb24oWzAsIEluZmluaXR5XSlcbiAgICB9KVxuICAgIHdhaXRzRm9yUHJvbWlzZSgoKSA9PiBnZXRTdWdnZXN0aW9ucygpXG4gICAgICAudGhlbigoc3VnZ2VzdGlvbnMpID0+IHtcbiAgICAgICAgZXhwZWN0KHN1Z2dlc3Rpb25zKS50b0hhdmVMZW5ndGgoNClcbiAgICAgIH0pKVxuICB9KVxuXG4gIGl0KCdvbmx5IGRpc3BsYXlzIGZpbGVzIHJlbGV2YW50IHRvIHRoZSBtYXRjaGluZyBzY29wZScsICgpID0+IHtcbiAgICB3YWl0c0ZvclByb21pc2UoKCkgPT4gYXRvbS5wYWNrYWdlcy5hY3RpdmF0ZVBhY2thZ2UoJ2xhbmd1YWdlLWphdmFzY3JpcHQnKSlcbiAgICBydW5zKCgpID0+IHtcbiAgICAgIGVkaXRvci5zZXRUZXh0KCdyZXF1aXJlKFxcJ3QnKVxuICAgICAgZWRpdG9yLnNldEN1cnNvckJ1ZmZlclBvc2l0aW9uKFswLCBJbmZpbml0eV0pXG4gICAgfSlcbiAgICB3YWl0c0ZvclByb21pc2UoKCkgPT4gZ2V0U3VnZ2VzdGlvbnMoKVxuICAgICAgLnRoZW4oKHN1Z2dlc3Rpb25zKSA9PiB7XG4gICAgICAgIGV4cGVjdChzdWdnZXN0aW9ucykudG9IYXZlTGVuZ3RoKDQpXG4gICAgICAgIGV4cGVjdChzdWdnZXN0aW9uc1swXS5kaXNwbGF5VGV4dCkudG9CZSgnc29tZWRpci90ZXN0ZmlsZS5qcycpXG4gICAgICAgIGV4cGVjdChzdWdnZXN0aW9uc1sxXS5kaXNwbGF5VGV4dCkudG9CZSgnbGlua2VkZGlyL3Rlc3RmaWxlLmpzJylcbiAgICAgICAgZXhwZWN0KHN1Z2dlc3Rpb25zWzJdLmRpc3BsYXlUZXh0KS50b0JlKCdzb21lZGlyL3Rlc3RkaXIvbmVzdGVkLXRlc3QtZmlsZS5qcycpXG4gICAgICAgIGV4cGVjdChzdWdnZXN0aW9uc1szXS5kaXNwbGF5VGV4dCkudG9CZSgnbGlua2VkZGlyL3Rlc3RkaXIvbmVzdGVkLXRlc3QtZmlsZS5qcycpXG4gICAgICB9KSlcbiAgfSlcblxuICBpdCgncmVtb3ZlcyB0aGUgZXh0ZW5zaW9uIHdoZW4gYWNjZXB0aW5nIGEgSlMgaW1wb3J0IHN1Z2dlc3Rpb24nLCAoKSA9PiB7XG4gICAgbGV0IGVkaXRvclZpZXdcbiAgICB3YWl0c0ZvclByb21pc2UoKCkgPT4gYXRvbS5wYWNrYWdlcy5hY3RpdmF0ZVBhY2thZ2UoJ2xhbmd1YWdlLWphdmFzY3JpcHQnKSlcbiAgICBydW5zKCgpID0+IHtcbiAgICAgIGVkaXRvclZpZXcgPSBhdG9tLnZpZXdzLmdldFZpZXcoZWRpdG9yKVxuICAgICAgZWRpdG9yLnNldFRleHQoJ3JlcXVpcmUoXFwnJylcbiAgICAgIGVkaXRvci5tb3ZlVG9Cb3R0b20oKVxuICAgICAgZWRpdG9yLmluc2VydFRleHQoJ3QnKVxuICAgICAgZWRpdG9yLmluc2VydFRleHQoJ2UnKVxuICAgICAgZWRpdG9yLmluc2VydFRleHQoJ3MnKVxuXG4gICAgICBhZHZhbmNlQ2xvY2soQ09NUExFVElPTl9ERUxBWSlcbiAgICB9KVxuICAgIHdhaXRzRm9yKCdhdXRvY29tcGxldGUgdmlldyB0byBhcHBlYXInLCAxMDAwLCAoKSA9PiB7XG4gICAgICByZXR1cm4gZWRpdG9yVmlldy5xdWVyeVNlbGVjdG9yKCcuYXV0b2NvbXBsZXRlLXBsdXMnKVxuICAgIH0pXG4gICAgcnVucygoKSA9PiB7XG4gICAgICBhdG9tLmNvbW1hbmRzLmRpc3BhdGNoKGVkaXRvclZpZXcsICdhdXRvY29tcGxldGUtcGx1czpjb25maXJtJylcblxuICAgICAgZXhwZWN0KGVkaXRvci5nZXRUZXh0KCkpLnRvRXF1YWwoJ3JlcXVpcmUoXFwnLi9zb21lZGlyL3Rlc3RmaWxlJylcbiAgICB9KVxuICB9KVxufSlcbiJdfQ==